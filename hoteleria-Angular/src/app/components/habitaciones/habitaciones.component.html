<div class="container-fluid mt-4">
  <h2>Habitaciones</h2>

  <!-- Botón para mostrar formulario -->
  <div class="mb-3">
    <button (click)="toggleForm()" class="btn btn-success">
      <i class="fa fa-plus"></i> Registrar Habitación
    </button>
  </div>

  <!-- Tabla de habitaciones -->
  <table class="table table-striped">
    <thead class="table-dark">
      <tr class="text-center">
        <th scope="col">#</th>
        <th scope="col">Número</th>
        <th scope="col">Tipo</th>
        <th scope="col">Descripción</th>
        <th scope="col">Precio</th>
        <th scope="col">Capacidad</th>
        <th scope="col">Estado</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr class="text-center" *ngFor="let habitacion of habitaciones; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ habitacion.numero }}</td>
        <td>{{ habitacion.tipo }}</td>
        <td>{{ habitacion.descripcion }}</td>
        <td>{{ habitacion.precio | currency:'MXN' }}</td>
        <td>{{ habitacion.capacidad }}</td>
        <td>{{ habitacion.estado }}</td>
        <td>
          <button class="btn btn-primary btn-sm me-1" (click)="editHabitacion(habitacion)">
            <i class="fa fa-edit"></i> Editar
          </button>
          <button class="btn btn-danger btn-sm me-1" (click)="deleteHabitacion(habitacion.id)">
            <i class="fa fa-trash"></i> Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="showForm" class="card mt-4" style="max-width: 600px; margin: auto">
    <div class="card-header bg-dark text-white text-center">
      <h5 class="mb-0">{{ modalText }}</h5>
    </div>
    <div class="card-body">
      <form [formGroup]="habitacionForm" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="numero" class="form-label">Número</label>
          <input type="number" class="form-control" id="numero" formControlName="numero" min="1" required>
        </div>

        <div class="mb-3">
          <label for="tipo" class="form-label">Tipo</label>
          <select class="form-select" id="tipo" formControlName="tipo" required>
            <option value="" disabled selected>Seleccione tipo</option>
            <option value="Individual">Individual</option>
            <option value="Doble">Doble</option>
            <option value="Suite">Suite</option>
          </select>
        </div>


        <div class="mb-3">
          <label for="descripcion" class="form-label">Descripción</label>
          <textarea class="form-control" id="descripcion" formControlName="descripcion" rows="3" maxlength="255"></textarea>
        </div>

        <div class="mb-3">
          <label for="precio" class="form-label">Precio</label>
          <input type="number" class="form-control" id="precio" formControlName="precio" min="0.01" step="0.01" required>
        </div>

        <div class="mb-3">
          <label for="capacidad" class="form-label">Capacidad</label>
          <input type="number" class="form-control" id="capacidad" formControlName="capacidad" min="1" required>
        </div>

        <div class="mb-3">
          <label for="estado" class="form-label">Estado</label>
          <select class="form-select" id="estado" formControlName="estado" required>
            <option value="" disabled selected>Seleccione estado</option>
            <option value="Disponible">Disponible</option>
            <option value="Ocupada">Ocupada</option>
            <option value="Limpieza">Limpieza</option>
            <option value="Mantenimiento">Mantenimiento</option>
          </select>
        </div>
        
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-success px-4" [disabled]="habitacionForm.invalid">
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>